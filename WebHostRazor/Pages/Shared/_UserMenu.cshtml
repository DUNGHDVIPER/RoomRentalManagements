@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

@if (SignInManager.IsSignedIn(User))
{
    var user = await UserManager.GetUserAsync(User);
    var userName = user?.Email?.Split('@')[0] ?? "User";

    <div style="position: relative; display: inline-block;">
        <button onclick="toggleMenu()" style="padding: 8px 12px; background: white; border: 1px solid #ccc; border-radius: 6px; cursor: pointer;">
            <strong>@userName</strong> ▼
        </button>

        <div id="menu" style="display: none; position: absolute; top: 100%; right: 0; background: white; border: 1px solid #ccc; border-radius: 6px; min-width: 150px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); z-index: 1000;">
            <a href="/Host/Profile" style="display: block; padding: 8px 12px; text-decoration: none; color: #333;">Profile</a>
            <a href="/Host/Dashboard" style="display: block; padding: 8px 12px; text-decoration: none; color: #333;">Dashboard</a>
            <hr style="margin: 4px 0; border: none; border-top: 1px solid #eee;">
            <a href="/Auth/Logout" style="display: block; padding: 8px 12px; text-decoration: none; color: #333;">Logout</a>
        </div>
    </div>

    <script>
        function toggleMenu() {
            var menu = document.getElementById('menu');
            menu.style.display = menu.style.display === 'none' ? 'block' : 'none';
        }

        document.onclick = function(e) {
            if (!e.target.closest('[onclick="toggleMenu()"]')) {
                document.getElementById('menu').style.display = 'none';
            }
        }
    </script>
}