
@page "/Auth/ResetPassword"
@model WebHostRazor.Pages.Auth.ResetPasswordModel
@{
    ViewData["Title"] = "Reset Password";
    Layout = "_AuthLayout";
}

<div class="text-center mb-4">
    <h2 class="fw-bold">Reset Password</h2>
    <p class="text-muted">Enter your new password</p>
</div>

@if (!string.IsNullOrEmpty(Model.Message))
{
    <div class="alert @(Model.IsSuccess ? "alert-success" : "alert-danger") alert-dismissible fade show" role="alert">
        @Model.Message
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
}

@if (!Model.ResetCompleted && string.IsNullOrEmpty(Model.Message))
{
    <form method="post">
        <div asp-validation-summary="All" class="text-danger"></div>

        <input asp-for="ResetPasswordRequest.Email" type="hidden" />
        <input asp-for="ResetPasswordRequest.Token" type="hidden" />

        <div class="mb-3">
            <label class="form-label">Email Address</label>
            <input value="@Model.ResetPasswordRequest.Email" class="form-control" readonly />
        </div>

        <div class="mb-3">
            <label asp-for="ResetPasswordRequest.NewPassword" class="form-label">New Password</label>
            <input asp-for="ResetPasswordRequest.NewPassword" type="password" class="form-control" placeholder="Enter new password" />
            <span asp-validation-for="ResetPasswordRequest.NewPassword" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="ResetPasswordRequest.ConfirmPassword" class="form-label">Confirm Password</label>
            <input asp-for="ResetPasswordRequest.ConfirmPassword" type="password" class="form-control" placeholder="Confirm new password" />
            <span asp-validation-for="ResetPasswordRequest.ConfirmPassword" class="text-danger"></span>
        </div>

        <button type="submit" class="btn btn-primary w-100">Reset Password</button>
    </form>
}
else if (Model.ResetCompleted)
{
    <div class="text-center">
        <i class="fas fa-check-circle fa-3x text-success mb-3"></i>
        <h4>Password Reset Complete</h4>
        <p class="text-muted">
            Your password has been reset successfully.
        </p>
        <a href="/auth/login" class="btn btn-primary">Sign In Now</a>
    </div>
}

<hr class="my-4">

<div class="text-center">
    <p class="mb-0">
        <a href="/auth/login" class="text-decoration-none">Back to Sign In</a>
    </p>
</div>